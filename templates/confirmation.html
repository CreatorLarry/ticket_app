{% extends 'master.html' %}
{% load static %}

{% block title %}
    <title>Confirmation</title>
{% endblock %}

{% block extra_css %}

{% endblock %}

{% block content %}
    <section class="confirmation-container container my-5 text-center">
        <div class="confirmation-box">
            <i class="fas fa-check-circle check-icon"></i>
            <h2 class="mt-3">Payment Successful!</h2>
            <p class="lead">Thank you for your purchase. Your ticket details have been sent to your email.</p>

            <!-- Order Summary -->
            <div class="order-summary mt-4">
                <h4>Order Summary</h4>
                <p><strong>Event:</strong> {{ order.event.title }}</p>
                <p><strong>Ticket Type:</strong> {{ order.ticket.get_category_display }}</p>
                <p><strong>Quantity:</strong> {{ order.quantity }}</p>
                <p><strong>Total Paid:</strong> Ksh {{ order.total_price }}</p>
            </div>

            <!-- Ticket Download Section -->
            <div class="download-ticket mt-4">
                <h4>Your Ticket</h4>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={{ qr_data|urlencode }}" alt="QR Code Ticket" class="qr-code">
                <p class="mt-2">Show this QR code at the entrance.</p>
                <a href="{% url 'download_ticket' order.id %}" class="btn btn-primary mt-3">Download Ticket</a>
            </div>

            <!-- Actions -->
            <div class="confirmation-actions mt-4">
                <a href="{% url 'home' %}" class="btn btn-outline-primary">Back to Home</a>
                <a href="{% url 'dashboard' %}" class="btn btn-secondary">View My Tickets</a>
            </div>
        </div>
    </section>

{% endblock %}

{% block extra_js %}

{% endblock %}

